---
const year = new Date().getFullYear()
---

<footer>
    <p>© {year} All rights reserved</p>
    <p>
        <a href="https://github.com/RomainPierre7/portfolio" target="_blank"> Made from scratch </a>
        |
        <a id="star-count" href="https://github.com/RomainPierre7" target="_blank">
            Loading... ⭐
        </a>
    </p>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', async () => {
        const yearElement = document.querySelector('footer p:first-child')
        const starCountElement = document.getElementById('star-count')

        const year = new Date().getFullYear()
        if (yearElement) yearElement.textContent = `© ${year} All rights reserved`

        try {
            const response = await fetch(
                'https://api.github-star-counter.workers.dev/user/romainpierre7'
            )
            const data = await response.json()
            const numberOfStars = data.stars
            if (starCountElement) starCountElement.textContent = `${numberOfStars} ⭐`
        } catch (error) {
            if (starCountElement) starCountElement.textContent = 'Error fetching stars ⭐'
        }
    })
</script>

<style>
    footer {
        background-color: #64ffda;
        color: #032727;
        text-align: center;
        padding: 1rem;
        height: 5rem; /* Need to change in global.css too */
    }

    footer p {
        margin: 0;
    }

    footer a {
        text-decoration: none;
        color: inherit;
    }
</style>
